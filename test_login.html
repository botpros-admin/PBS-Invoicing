<!DOCTYPE html>
<html>
<head>
    <title>Test Supabase Login</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <h1>Test Supabase Authentication</h1>
    
    <div id="status">Ready to test...</div>
    
    <button onclick="testLogin('admin@pbsmedical.com')">Test admin@pbsmedical.com</button>
    <button onclick="testLogin('billing@pbsmedical.com')">Test billing@pbsmedical.com</button>
    <button onclick="testLogin('claims@pbsmedical.com')">Test claims@pbsmedical.com</button>
    
    <pre id="result"></pre>

    <script>
        // Your Supabase credentials
        const SUPABASE_URL = 'https://qwvukolqraoucpxjqpmu.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF3dnVrb2xxcmFvdWNweGpxcG11Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM1NzI2OTEsImV4cCI6MjA1OTE0ODY5MX0.mhyCdgks_NAvnWWbkT7642Ww_RkwwosruEXLSLmQ_ew';
        
        // Create a simple Supabase client
        const { createClient } = supabase;
        const supabaseClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        
        async function testLogin(email) {
            const statusEl = document.getElementById('status');
            const resultEl = document.getElementById('result');
            
            statusEl.textContent = `Testing login for ${email}...`;
            
            try {
                // Try to sign in
                const { data, error } = await supabaseClient.auth.signInWithPassword({
                    email: email,
                    password: 'TempPass123!'
                });
                
                if (error) {
                    statusEl.textContent = '❌ Login failed';
                    resultEl.textContent = JSON.stringify({
                        error: error.message,
                        status: error.status,
                        details: error
                    }, null, 2);
                } else {
                    statusEl.textContent = '✅ Login successful!';
                    resultEl.textContent = JSON.stringify({
                        user: data.user,
                        session: data.session ? 'Session created' : 'No session'
                    }, null, 2);
                    
                    // Sign out after test
                    setTimeout(() => {
                        supabaseClient.auth.signOut();
                        statusEl.textContent = 'Signed out after test';
                    }, 3000);
                }
            } catch (err) {
                statusEl.textContent = '❌ Unexpected error';
                resultEl.textContent = JSON.stringify({
                    error: err.message,
                    stack: err.stack
                }, null, 2);
            }
        }
    </script>
</body>
</html>